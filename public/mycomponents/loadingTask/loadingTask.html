<dom-module id="pi-loading-task">

    <link rel="import" href="../../bower_components/paper-card/paper-card.html">
    <link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
    <link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
    <link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
    <link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
    <link rel="import" href="../../bower_components/paper-input/paper-input.html">
    <link rel="import" href="../../bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">

    <link rel="import" href="../errorCard/errorCard.html">
    <template>
        <style>
            .hidden {
                display: none;
            }

            #loading-task {
                /*height: 150px;*/
                /*position:absolute;*/
                background-color: #555555;
                color: white;
                width: 60vw;
                margin: 3vh 20vw 3vh 20vw;
            }

            :host {
                --loading-progress: 0%;
            }

            #card-content {
                background-color: transparent;
            }

            @-webkit-keyframes myprogress {
                0% {
                    background-position: 0 0;
                }
                100% {
                    background-position: 150px 150px;
                }
            }

            /**
             * Progress animation.
             */
            /*.secondary-progress {
                opacity: 0.9;
                display: inline-block;
                background-color: #efefef;
                position: relative;
                height: 20px;
                width: 100%;
                -webkit-animation: myprogress 5s infinite linear;
                -webkit-background-size: 100px 100px;
                background-image:
                -webkit-linear-gradient(
                -45deg,
                rgba(68, 138, 0, 1) 25%,
                transparent 25%,
                transparent 50%,
                rgba(68, 138, 0, 1) 50%,
                rgba(68, 138, 0, 1) 75%,
                transparent 75%,
                transparent
                );
                position: absolute;
                width: 92%;
                margin: 0px 4% 6px;
                border: 2px solid white;
                -webkit-box-sizing: border-box;
                border-radius: 20px;
                bottom: 0px;
            }*/

            .progress {
                display: inline-block;
                background-color: #448A00;
                width: var(--loading-progress);
                height: 100%;
                position: absolute;
            }

            paper-dialog-scrollable paper-card > div.card-content {
                color: black;
            }

            paper-dialog {
                width: 80vw;
            }

            #loading-task span.right {
                right: 20px;
                position: absolute;
            }

            #buttons-handler {
                position: absolute;
                right: 10px;
                top: 10px;
                display: flex;
                align-items: flex-end;
                flex-direction: row;
                justify-content: space-between;
            }

            #buttons-handler paper-icon-button {
                background-color: rgba(10, 10, 10, 0.1);
                margin: 0 2px 0;
            }
        </style>

        <paper-dialog id="link-popup">
            <h2>Link do pliku</h2>
            <paper-input value="{{link}}">
                <div suffix> Go to link</div>
                <paper-icon-button suffix onclick="{{goToLink()}}" icon="icons:forward">
                </paper-input-button>
            </paper-input>

            <div class="buttons">
                <paper-button dialog-confirm>Ok</paper-button>
            </div>
        </paper-dialog>

        <paper-dialog id="details-popup">
            <h2>Informacje z wyjścia</h2>
            <paper-dialog-scrollable>
                <p>ID: <span>[[id]]</span></p>
                <p>Autor: <span>[[createdBy]]</span></p>
                <p>Status: <span>[[status]]</span></p>
                <p>Procent ukończenia: <span>[[progressValue]]</span></p>
                <p>Polecenie: <span>[[command]]</span></p>
                <!-- <p>Zadanie utworzono: <span>[[created]]</span></p>
                <p>Rozpoczęto przetwarzanie: <span>[[started]]</span></p>
                <p>Zakończono przetwarzanie: <span>[[finished]]</span></p> -->
            </paper-dialog-scrollable>
            <div class="buttons">
                <paper-button dialog-confirm>Zamknij</paper-button>
            </div>
        </paper-dialog>

        <paper-card id='loading-task' elevation="2">
            <div class='progress'>
            </div>
                <!-- <div class='primary-progress'></div> -->
            <!-- <div class="progress"> -->
            </div>
            <div id='card-content' class="card-content">
                <div id="buttons-handler">
                    <paper-icon-button id="start-btn" icon="av:play-arrow"></paper-icon-button>
                    <paper-icon-button id="pause-btn" icon="av:pause" class="hidden"></paper-icon-button>
                    <paper-icon-button id="link-btn" icon="link"></paper-icon-button>
                    <paper-icon-button id="details-btn" icon="feedback"></paper-icon-button>
                    <paper-icon-button id="delete-btn" icon="icons:delete"></paper-icon-button>
                </div>
                <p>Created by:
                    <span>[[createdBy]]</span>
                </p>
                <p>Polecenie:
                    <span>[[command]]</span>
                </p>
            </div>

        </paper-card>

    </template>
    <script src="loadingTask.js" charset="utf-8"></script>
    <!-- <script src="loadingTaskBehaviour.js"></script> -->
</dom-module>
